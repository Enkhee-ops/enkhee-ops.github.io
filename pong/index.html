<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classic Pong</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            background: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: 'Courier New', monospace;
            overflow: hidden;
        }
        canvas {
            background: #000;
            border: 2px solid #fff;
            box-shadow: 0 0 50px #00f, inset 0 0 50px #000;
            max-width: 100%;
            max-height: 100%;
        }
        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            color: #fff;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            text-align: center;
            z-index: 10;
        }
        .controls {
            font-size: 18px;
            margin-top: 20px;
            opacity: 0.8;
        }
        button {
            background: #00f;
            color: #fff;
            border: none;
            padding: 15px 30px;
            font-size: 20px;
            font-family: inherit;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px;
            box-shadow: 0 0 20px #00f;
            transition: all 0.3s;
        }
        button:hover {
            background: #0ff;
            box-shadow: 0 0 30px #0ff;
        }
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <canvas id="pongCanvas" width="800" height="600"></canvas>

    <div id="menuOverlay" class="overlay">
        <h1>PONG GAME</h1>
        <p>Classic Pong </p>
        <button onclick="startGame()">Play Mouse</button>
        <div class="controls">
            Mouse: Move Paddle | P: Pause | ESC: Menu<br>
            First to 11 points wins!
        </div>
    </div>


    <div id="pauseOverlay" class="overlay hidden">
        <h2>PAUSED</h2>
        <p>Press P to Resume</p>
    </div>

 
    <div id="gameOverOverlay" class="overlay hidden">
        <h2 id="winnerText">Player Wins!</h2>
        <button onclick="restartGame()">Play Again (R)</button>
        <button onclick="showMenu()">Main Menu (ESC)</button>
    </div>

    <script>
        const canvas = document.getElementById('pongCanvas');
        const ctx = canvas.getContext('2d');


        let gameState = {
            playing: false,
            paused: false,
            scorePlayer: 0,
            scoreAI: 0,
            winScore: 11,
            ball: { x: canvas.width / 2, y: canvas.height / 2, vx: 5, vy: 3, radius: 8 },
            paddlePlayer: { x: 20, y: canvas.height / 2 - 50, width: 12, height: 100, vy: 0 },
            paddleAI: { x: canvas.width - 32, y: canvas.height / 2 - 50, width: 12, height: 100, vy: 0 },
            aiSpeed: 4, 
            keys: {},
            mouseY: canvas.height / 2
        };


        let audioCtx;
        function initAudio() {
            audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        }
        function playSound(frequency, duration, type = 'sine') {
            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            oscillator.frequency.value = frequency;
            oscillator.type = type;
            gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration);
            oscillator.start(audioCtx.currentTime);
            oscillator.stop(audioCtx.currentTime + duration);
        }

   
        window.addEventListener('keydown', (e) => {
            gameState.keys[e.key.toLowerCase()] = true;
            if (e.key === 'p' || e.key === 'P') togglePause();
            if (e.key === 'Escape') {
                if (gameState.playing) showMenu();
            }
            if (e.key.toLowerCase() === 'r' && !gameState.playing) restartGame();
        });
        window.addEventListener('keyup', (e) => {
            gameState.keys[e.key.toLowerCase()] = false;
        });
        canvas.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            gameState.mouseY = e.clientY - rect.top;
        });
        canvas.addEventListener('click', () => {
            if (!gameState.playing) startGame();
        });


        function startGame() {
            gameState.playing = true;
            gameState.paused = false;
            resetBall();
            hideAllOverlays();
            initAudio();
            gameLoop();
        }

        function restartGame() {
            gameState.scorePlayer = 0;
            gameState.scoreAI = 0;
            resetBall();
            hideAllOverlays();
            gameState.playing = true;
        }

        function togglePause() {
            gameState.paused = !gameState.paused;
            document.getElementById('pauseOverlay').classList.toggle('hidden', !gameState.paused);
        }

        function showMenu() {
            gameState.playing = false;
            document.getElementById('menuOverlay').classList.remove('hidden');
            document.getElementById('pauseOverlay').classList.add('hidden');
            document.getElementById('gameOverOverlay').classList.add('hidden');
        }

        function gameOver(winner) {
            gameState.playing = false;
            document.getElementById('winnerText').textContent = winner === 'player' ? 'Player Wins!' : 'AI Wins!';
            document.getElementById('gameOverOverlay').classList.remove('hidden');
        }

        function resetBall() {
            gameState.ball.x = canvas.width / 2;
            gameState.ball.y = canvas.height / 2;
            gameState.ball.vx = (Math.random() > 0.5 ? 1 : -1) * 5;
            gameState.ball.vy = (Math.random() - 0.5) * 6;
        }

        function update() {
            if (!gameState.playing || gameState.paused) return;

        
            let targetY = gameState.mouseY - gameState.paddlePlayer.height / 2;
            gameState.paddlePlayer.y += (targetY - gameState.paddlePlayer.y) * 0.2; // Smooth follow

    
            if (gameState.keys['w'] || gameState.keys['arrowup']) gameState.paddlePlayer.y -= 6;
            if (gameState.keys['s'] || gameState.keys['arrowdown']) gameState.paddlePlayer.y += 6;

   
            gameState.paddlePlayer.y = Math.max(0, Math.min(canvas.height - gameState.paddlePlayer.height, gameState.paddlePlayer.y));
            gameState.paddleAI.y = Math.max(0, Math.min(canvas.height - gameState.paddleAI.height, gameState.paddleAI.y));

      
            const aiTarget = gameState.ball.y - gameState.paddleAI.height / 2;
            gameState.paddleAI.y += (aiTarget - gameState.paddleAI.y) * 0.15; 


            gameState.ball.x += gameState.ball.vx;
            gameState.ball.y += gameState.ball.vy;


            if (gameState.ball.y <= gameState.ball.radius || gameState.ball.y >= canvas.height - gameState.ball.radius) {
                gameState.ball.vy *= -1;
                playSound(400, 0.1);
            }


            if (collides(gameState.ball, gameState.paddlePlayer) || collides(gameState.ball, gameState.paddleAI)) {
                gameState.ball.vx *= -1;
                gameState.ball.vy += (gameState.ball.y - (collides(gameState.ball, gameState.paddlePlayer) ? gameState.paddlePlayer.y : gameState.paddleAI.y)) * 0.15;
                playSound(600, 0.1, 'square');

                gameState.ball.vx *= 1.05;
                gameState.ball.vy *= 1.05;
            }


            if (gameState.ball.x < 0) {
                gameState.scoreAI++;
                playSound(200, 0.3, 'sawtooth');
                if (gameState.scoreAI >= gameState.winScore) gameOver('ai');
                else resetBall();
            }
            if (gameState.ball.x > canvas.width) {
                gameState.scorePlayer++;
                playSound(200, 0.3, 'sawtooth');
                if (gameState.scorePlayer >= gameState.winScore) gameOver('player');
                else resetBall();
            }
        }

        function collides(ball, paddle) {
            return ball.x <= paddle.x + paddle.width + ball.radius &&
                   ball.x >= paddle.x - ball.radius &&
                   ball.y <= paddle.y + paddle.height + ball.radius &&
                   ball.y >= paddle.y - ball.radius;
        }

        function draw() {

            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);


            ctx.shadowColor = '#00f';
            ctx.shadowBlur = 20;


            ctx.strokeStyle = '#fff';
            ctx.lineWidth = 4;
            ctx.setLineDash([20, 20]);
            ctx.beginPath();
            ctx.moveTo(canvas.width / 2, 0);
            ctx.lineTo(canvas.width / 2, canvas.height);
            ctx.stroke();
            ctx.setLineDash([]);


            ctx.fillStyle = '#fff';
            ctx.shadowBlur = 15;
            ctx.fillRect(gameState.paddlePlayer.x, gameState.paddlePlayer.y, gameState.paddlePlayer.width, gameState.paddlePlayer.height);
            ctx.fillRect(gameState.paddleAI.x, gameState.paddleAI.y, gameState.paddleAI.width, gameState.paddleAI.height);


            ctx.shadowBlur = 25;
            ctx.beginPath();
            ctx.arc(gameState.ball.x, gameState.ball.y, gameState.ball.radius, 0, Math.PI * 2);
            ctx.fill();


            ctx.shadowBlur = 0;
            ctx.font = 'bold 72px Courier New';
            ctx.textAlign = 'center';
            ctx.fillText(gameState.scorePlayer, canvas.width * 0.25, 90);
            ctx.fillText(gameState.scoreAI, canvas.width * 0.75, 90);

  
            ctx.font = '20px Courier New';
            ctx.fillText('Mouse| P Pause | ESC Menu', canvas.width / 2, 30);
        }

        function gameLoop() {
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }

        function hideAllOverlays() {
            document.querySelectorAll('.overlay').forEach(el => el.classList.add('hidden'));
        }


        showMenu();
        window.addEventListener('load', () => {

            function resize() {
                const maxW = window.innerWidth * 0.9;
                const maxH = window.innerHeight * 0.9;
                const ratio = 800 / 600;
                if (maxW / maxH > ratio) {
                    canvas.height = maxH;
                    canvas.width = maxH * ratio;
                } else {
                    canvas.width = maxW;
                    canvas.height = maxW / ratio;
                }
            }
            resize();
            window.addEventListener('resize', resize);
        });
    </script>
</body>
</html>
